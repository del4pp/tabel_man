# OKKO Fuel Prices Auth Extractor

Chrome extension –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è authorization header –∑ –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ API –ø–∞–ª–∏–≤–Ω–∏—Ö —Ü—ñ–Ω –Ω–∞ —Å–∞–π—Ç—ñ OKKO.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Chrome —ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ `chrome://extensions/`
2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å "Developer mode" (–†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞) —É –≤–µ—Ä—Ö–Ω—å–æ–º—É –ø—Ä–∞–≤–æ–º—É –∫—É—Ç—ñ
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Load unpacked" (–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑–ø–∞–∫–æ–≤–∞–Ω–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è)
4. –í–∏–±–µ—Ä—ñ—Ç—å –ø–∞–ø–∫—É –∑ —Ü–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º (`/Users/user/MEGA/scania/chrome_exp`)

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ —Å–∞–π—Ç OKKO (–∞–±–æ –±—É–¥—å-—è–∫–∏–π —Å–∞–π—Ç, —â–æ —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç–∏ –¥–æ ssp-online-back.okko.ua)
2. –í–∏–∫–æ–Ω–∞–π—Ç–µ –¥—ñ—ó –Ω–∞ —Å–∞–π—Ç—ñ, —è–∫—ñ –ø—Ä–∏–∑–≤–æ–¥—è—Ç—å –¥–æ –∑–∞–ø–∏—Ç—É –Ω–∞ `/userdata-service/fuel_prices`
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —ñ–∫–æ–Ω–∫—É —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤ –ø–∞–Ω–µ–ª—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ Chrome

**–Ø–∫—â–æ –∑–∞–ø–∏—Ç —â–µ –Ω–µ –ø—Ä–æ–π—à–æ–≤:**
- –ë—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É –¥–æ fuel_prices API..."

**–Ø–∫—â–æ –∑–∞–ø–∏—Ç –ø—Ä–æ–π—à–æ–≤ —ñ –¥–∞–Ω—ñ –æ—Ç—Ä–∏–º–∞–Ω–æ:**
- –ë—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ —Ç—ñ–ª—å–∫–∏ –∫–Ω–æ–ø–∫—É "–ö–æ–ø—ñ—é–≤–∞—Ç–∏" –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —á–∞—Å —Ç–∞ URL –∑–∞–ø–∏—Ç—É
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ö–æ–ø—ñ—é–≤–∞—Ç–∏", —â–æ–± —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ authorization header —É –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è

–ö–Ω–æ–ø–∫–∞ **"–ó–Ω–∞–π—Ç–∏ –∑–∞–ø–∏—Ç"** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- –®—É–∫–∞—î –∑–∞–ø–∏—Ç–∏ –¥–æ fuel_prices API –Ω–∞ –ø–æ—Ç–æ—á–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- –Ø–∫—â–æ –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å - –æ–Ω–æ–≤–ª—é—î —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥–ª—è –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É
- –í–∏—Ç—è–≥—É—î authorization header (–±–µ–∑ "Bearer ") —Ç–∞ –ø–æ–∫–∞–∑—É—î –∫–Ω–æ–ø–∫—É –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

–ö–Ω–æ–ø–∫–∞ **"–û—á–∏—Å—Ç–∏—Ç–∏ –¥–∞–Ω—ñ"** –≤–∏–¥–∞–ª—è—î –≤—Å—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Ç–æ–∫–µ–Ω–∏.

## –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–Ø–∫—â–æ –Ω–µ –ø—Ä–∞—Ü—é—î, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
- `üåê webRequest: Fuel prices request intercepted`
- `üéØ CONTENT SCRIPT: Fetch intercepted for fuel_prices`
- `‚úÖ Found authorization header`

## –©–æ —Ä–æ–±–∏—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

- –ü–µ—Ä–µ—Ö–æ–ø–ª—é—î HTTP –∑–∞–ø–∏—Ç–∏ –¥–æ `ssp-online-back.okko.ua/userdata-service/fuel_prices`
- –í–∏—Ç—è–≥—É—î `Authorization` header –∑ —Ü–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- –ó–±–µ—Ä—ñ–≥–∞—î –æ—Å—Ç–∞–Ω–Ω—ñ–π –∑–∞—Ö–æ–ø–ª–µ–Ω–∏–π header –ª–æ–∫–∞–ª—å–Ω–æ
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î header –≤ –∑—Ä—É—á–Ω–æ–º—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ
- –õ–æ–≥—É—î –≤—Å—é –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ–±–∞–≥—ñ–Ω–≥—É

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Manifest V3 –∑ service worker
- webRequest API –¥–ª—è –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ —á–∏—Ç–∞–Ω–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –∑–∞–ø–∏—Ç—ñ–≤
- Content script –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è (—è–∫ —Ä–µ–∑–µ—Ä–≤–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç)
- –õ–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
- –ü—ñ–¥—Ç—Ä–∏–º—É—î –≤—Å—ñ HTTP –º–µ—Ç–æ–¥–∏ (GET, POST, PUT, —Ç–æ—â–æ)

## –ú–µ—Ç–æ–¥–∏ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ (–æ—Å–∫—ñ–ª—å–∫–∏ OKKO –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Service Worker, —è–∫–∏–π –æ–±—Ö–æ–¥–∏–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –º–µ—Ç–æ–¥–∏):

1. **Content script interception** - –æ—Å–Ω–æ–≤–Ω–∏–π –º–µ—Ç–æ–¥ (–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è fetch/XMLHttpRequest –≤ –∫–æ–Ω—Ç–µ–Ω—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏)
2. **webRequest API** (background script) - –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –º–µ—Ç–æ–¥ (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–∏–π)
3. **Performance Observer** - –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ü—Ä–∏–º—ñ—Ç–∫–∞**: –ß–µ—Ä–µ–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è Manifest V3, webRequest –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ service worker. –û—Å–Ω–æ–≤–Ω–∏–π –º–µ—Ç–æ–¥ - content script interception.

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è:
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `test.html` —É –±—Ä–∞—É–∑–µ—Ä—ñ (—Ñ–∞–π–ª –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –ø–∞–ø—Ü—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è)
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "–ó—Ä–æ–±–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø–∏—Ç"
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–∏–π –∑–∞–ø–∏—Ç

## –ë–µ–∑–ø–µ–∫–∞

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –º–∞—î –¥–æ—Å—Ç—É–ø —Ç—ñ–ª—å–∫–∏ –¥–æ –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ –¥–æ–º–µ–Ω `ssp-online-back.okko.ua` —ñ –Ω–µ –ø–µ—Ä–µ–¥–∞—î –¥–∞–Ω—ñ –∫—É–¥–∏—Å—å. –í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.

## Troubleshooting

–Ø–∫—â–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –Ω–µ –ø—Ä–∞—Ü—é—î:
1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –Ω–∞ —Å–∞–π—Ç—ñ, —è–∫–∏–π —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç–∏ –¥–æ OKKO API
2. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ç–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –¥—ñ—ó
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫:
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ `chrome://extensions/`
   - –ó–Ω–∞–π–¥—ñ—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Inspect" –ø–æ—Ä—É—á –∑ background script
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏
4. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —É–≤—ñ–º–∫–Ω–µ–Ω–æ —Ç–∞ –º–∞—î –≤—Å—ñ –¥–æ–∑–≤–æ–ª–∏
5. –°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è (–∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ extensions)
6. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å service worker: –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ extensions –∑–Ω–∞–π–¥—ñ—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è ‚Üí "Inspect" –ø–æ—Ä—É—á –∑ "service worker"

## –î–µ–±–∞–≥—ñ–Ω–≥

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É—î –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤ –∫–æ–Ω—Å–æ–ª—å:
- Background script: –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏ —Ç–∞ –∑–Ω–∞–π–¥–µ–Ω—ñ authorization headers
- Popup script: –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

–í—ñ–¥–∫—Ä–∏–π—Ç–µ Developer Tools –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ extensions –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤.

### –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:

1. **–ó–∞–ø–∏—Ç–∏ —á–µ—Ä–µ–∑ Service Worker —Å–∞–π—Ç—É** - —è–∫—â–æ OKKO –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–ª–∞—Å–Ω–∏–π Service Worker, –∑–∞–ø–∏—Ç–∏ –º–æ–∂—É—Ç—å –Ω–µ –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—Ç–∏—Å—è webRequest API
2. **CORS –∞–±–æ –∑–º—ñ—à–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç** - –∑–∞–ø–∏—Ç–∏ –∑ HTTPS —Å–∞–π—Ç—É –¥–æ HTTP –º–æ–∂—É—Ç—å –±–ª–æ–∫—É–≤–∞—Ç–∏—Å—è
3. **–î–æ–∑–≤–æ–ª–∏ –Ω–µ –Ω–∞–¥–∞–Ω–æ** - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ webRequest

### –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `chrome://extensions/`
2. –ó–Ω–∞–π–¥—ñ—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Details"
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–µ–∫—Ü—ñ—é "Permissions" - –º–∞—î –±—É—Ç–∏ "Read and change all your data on websites you visit"
